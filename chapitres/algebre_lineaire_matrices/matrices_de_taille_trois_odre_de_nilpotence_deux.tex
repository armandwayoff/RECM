\begin{exercice}
    Déterminer toutes les matrices $M \in \M_3(\K)$ telles que $M^2=0$.
\end{exercice}

\begin{solution}
    \marginnote[0cm]{Source : énoncé de \cite{ellipses}}
    \begin{itemize}
        \item[$\rhd$] Si $M$ est la matrice nulle, elle est solution de l'équation.
        \item[$\rhd$] Supposons que $M$ n'est pas la matrice nulle. Soit $\varphi$ l'endomorphisme canoniquement associé à $M$. \\
        Comme $M$ est non nulle, existe donc un vecteur $x$ tel que $\varphi(x) \not= 0$. Par le théorème du rang, 
        $$\Rg \varphi + \dim \Ker \varphi = 3.$$ 
        Comme $M^2 = 0$, $\Im \varphi \subset \Ker \varphi$ et donc $\Rg \varphi \leqslant \dim \Ker \varphi$ et comme $\Rg \varphi \geqslant 1$ (car $M \not=0$), nécessairement, 
        $$\Rg \varphi = 1 \text{ et } \dim \Ker \varphi = 2.$$
        Comme $\varphi(x) \in \Ker \varphi$, il existe $z \in \Ker \varphi$ tel que la famille $\{ \varphi(x), z \}$ est une base de $\Ker \varphi$. \\
        Montrons que la famille $\mathscr{F} \defeq \{x, \varphi(x), z \}$ est libre. \\
        Soit $(\alpha, \beta, \gamma) \in \K^3$ tel que 
        $$\alpha x + \beta \varphi(x) + \gamma z = 0.$$
        En composant cette relation par $\varphi$ on obtient immédiatement $\alpha = 0$ car $z \in \Ker \varphi$ et $\varphi^2 = 0$. La liberté de la famille $\{ \varphi(x), z \}$ permet de conclure. \\
        La matrice de $\varphi$ dans cette base est 
        $A \defeq
        \begin{pmatrix}
        0 & 0 & 0 \\
        1 & 0 & 0 \\ 
        0 & 0 & 0
        \end{pmatrix}
        $. \\
        Les matrices solutions sont donc dans l'ensemble
        $$\mathscr{S} \defeq \Big\{ \big\{0\big\} \cup \big\{\Inv{P} A P, P \in \Gl_3(\K) \big\} \Big\}.$$
        \item[$\rhd$] Réciproquement, comme $A^2 = 0$, toutes les matrices de $\mathscr{S}$ sont nilpotentes d'ordre $2$. \\
    \end{itemize}
    Finalement l'ensemble des solutions est $\mathscr{S}$.
\end{solution}
